apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: zlifecycle-bff
  annotations:
    nginx.ingress.kubernetes.io/backend-protocol: HTTP
    nginx.ingress.kubernetes.io/enable-cors: "true"
    nginx.ingress.kubernetes.io/cors-allow-methods: "PUT, GET, POST, OPTIONS"
spec:
  ingressClassName: nginx
  rules:
{{- range $host := splitList "," .Values.domains }}
  {{- range $path := .Values.ingressPaths }}
      - host: {{ $host }}
        http:
          paths:
            - path: {{ $path }}
              pathType: ImplementationSpecific
              backend:
                service:
                  name: zlifecycle-web-bff
                  port:
                    number: 80
  {{- end }}
{{- end }}
